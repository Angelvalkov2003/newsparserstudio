{
  "type": "object",
  "title": "MarkdownDocument",
  "description": "Complete markdown document structure containing metadata and structured components",
  "properties": {
    "metadata": {
      "type": "object",
      "title": "ArticleMetadata",
      "description": "Metadata for article documents including publication info, authors, categories, and tags",
      "properties": {
        "title": {
          "type": [
            "string",
            "null"
          ],
          "description": "Article title / headline"
        },
        "document_date": {
          "type": [
            "string",
            "null"
          ],
          "format": "date-time",
          "description": "Publication date/time of the article (ISO 8601 format)"
        },
        "authors": {
          "type": [
            "array",
            "null"
          ],
          "description": "List of article authors",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": [
                  "string",
                  "null"
                ],
                "description": "Author's name"
              },
              "url": {
                "type": [
                  "string",
                  "null"
                ],
                "format": "uri",
                "description": "URL to author's profile or more information"
              }
            }
          }
        },
        "categories": {
          "type": [
            "array",
            "null"
          ],
          "description": "List of article categories or sections",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": [
                  "string",
                  "null"
                ],
                "description": "Category name"
              },
              "url": {
                "type": [
                  "string",
                  "null"
                ],
                "format": "uri",
                "description": "URL to category page or more information"
              }
            }
          }
        },
        "tags": {
          "type": [
            "array",
            "null"
          ],
          "description": "List of article tags",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": [
                  "string",
                  "null"
                ],
                "description": "Tag name"
              },
              "url": {
                "type": [
                  "string",
                  "null"
                ],
                "format": "uri",
                "description": "URL to tag page or more information"
              }
            }
          }
        }
      }
    },
    "components": {
      "type": "object",
      "title": "MarkdownDocumentComponents",
      "description": "Schema for generating structured markdown document components. Each component represents a specific markdown element type.\n\nMarkdownFormattedText Definition:\nMarkdownFormattedText is a string that supports standard markdown formatting including:\n- **Bold text** using **text** or __text__\n- *Italic text* using *text* or _text_\n- ***Bold and italic*** using ***text*** or ___text___\n- `Inline code` using backticks\n- ~~Strikethrough~~ using ~~text~~\n- [Inline links](URL) using [text](URL) format\n- Inline equations using \\[LaTeX\\] format (e.g., \\[E=mc^2\\])\n- Superscript and subscript where supported\n- Line breaks and basic text formatting\n- Special characters and Unicode text\n\nAll text properties marked as MarkdownFormattedText can contain any combination of these formatting elements. Properties that accept MarkdownFormattedText are identified by having \"(MarkdownFormattedText)\" appended to their description.",
      "properties": {
        "components": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "citation",
                    "description": "Component type: citation"
                  },
                  "properties": {
                    "type": "object",
                    "description": "Properties for citation component",
                    "properties": {
                      "citation_text": {
                        "type": "string",
                        "description": "The main text content of the citation or quote. This should contain the actual quoted material that is being referenced or highlighted. (MarkdownFormattedText)"
                      },
                      "author_text": {
                        "type": "string",
                        "description": "The attribution text for the citation, typically containing the author's name, source, or other attribution information. This field is optional and can be omitted if no attribution is needed. (MarkdownFormattedText)"
                      }
                    },
                    "required": [
                      "citation_text"
                    ]
                  }
                },
                "required": [
                  "type",
                  "properties"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "code_block",
                    "description": "Component type: code_block"
                  },
                  "properties": {
                    "type": "object",
                    "description": "Properties for code_block component",
                    "properties": {
                      "code": {
                        "type": "string",
                        "description": "The source code content to be displayed in the code block."
                      },
                      "language": {
                        "type": "string",
                        "description": "The programming language for syntax highlighting (e.g., 'python', 'javascript', 'html'). This field is optional."
                      }
                    },
                    "required": [
                      "code"
                    ]
                  }
                },
                "required": [
                  "type",
                  "properties"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "equation",
                    "description": "Component type: equation"
                  },
                  "properties": {
                    "type": "object",
                    "description": "Properties for equation component",
                    "properties": {
                      "latex": {
                        "type": "string",
                        "description": "The mathematical expression written in LaTeX format (e.g., 'F = ma', '\\sum_{i=1}^{n} x_i')."
                      },
                      "equation_number": {
                        "type": "integer",
                        "description": "Optional equation number for referencing. When provided, the equation will be displayed with this number in parentheses."
                      }
                    },
                    "required": [
                      "latex"
                    ]
                  }
                },
                "required": [
                  "type",
                  "properties"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "footnote",
                    "description": "Component type: footnote"
                  },
                  "properties": {
                    "type": "object",
                    "description": "Properties for footnote component",
                    "properties": {
                      "identifier": {
                        "type": "string",
                        "description": "Unique identifier for the footnote (e.g., '1', 'note', 'ref-a'). This is used to link the footnote reference to its content."
                      },
                      "content": {
                        "type": "string",
                        "description": "The footnote content text that provides additional information or references. (MarkdownFormattedText)"
                      }
                    },
                    "required": [
                      "identifier",
                      "content"
                    ]
                  }
                },
                "required": [
                  "type",
                  "properties"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "heading",
                    "description": "Component type: heading"
                  },
                  "properties": {
                    "type": "object",
                    "description": "Properties for heading component",
                    "properties": {
                      "text": {
                        "type": "string",
                        "description": "The heading text content that will be displayed as the heading title. (MarkdownFormattedText)"
                      },
                      "level": {
                        "type": "integer",
                        "description": "The heading level from 1 to 6, where 1 is the largest heading (H1) and 6 is the smallest (H6). Defaults to 1.",
                        "minimum": 1,
                        "maximum": 6
                      }
                    },
                    "required": [
                      "text"
                    ]
                  }
                },
                "required": [
                  "type",
                  "properties"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "horizontal_ruler",
                    "description": "Component type: horizontal_ruler"
                  },
                  "properties": {
                    "type": "object",
                    "description": "Properties for horizontal_ruler component",
                    "properties": {},
                    "required": []
                  }
                },
                "required": [
                  "type",
                  "properties"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "image",
                    "description": "Component type: image"
                  },
                  "properties": {
                    "type": "object",
                    "description": "Properties for image component",
                    "properties": {
                      "url": {
                        "type": "string",
                        "description": "The URL or path to the image file. Can be a web URL, relative path, or data URI."
                      },
                      "caption": {
                        "type": "string",
                        "description": "Optional caption text displayed below the image. (MarkdownFormattedText)"
                      },
                      "description": {
                        "type": "string",
                        "description": "Alt text description for accessibility and SEO purposes, shown when image cannot be loaded."
                      },
                      "link_url": {
                        "type": "string",
                        "description": "Optional URL to make the entire image clickable as a hyperlink."
                      }
                    },
                    "required": []
                  }
                },
                "required": [
                  "type",
                  "properties"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "link",
                    "description": "Component type: link"
                  },
                  "properties": {
                    "type": "object",
                    "description": "Properties for link component",
                    "properties": {
                      "text": {
                        "type": "string",
                        "description": "The visible text content that will be displayed as the clickable link."
                      },
                      "url": {
                        "type": "string",
                        "description": "The destination URL or path that the link will navigate to when clicked."
                      }
                    },
                    "required": [
                      "text",
                      "url"
                    ]
                  }
                },
                "required": [
                  "type",
                  "properties"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "list",
                    "description": "Component type: list"
                  },
                  "properties": {
                    "type": "object",
                    "description": "Properties for list component",
                    "properties": {
                      "items": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "indent": {
                              "type": "integer",
                              "minimum": 0,
                              "description": "The indentation level of the list item (0 for top-level, 1 for first nested level, etc.). Must follow proper hierarchical structure - cannot skip levels."
                            },
                            "bullet": {
                              "type": "string",
                              "description": "The bullet character or numbering for the list item. Use '-', '*' for unordered lists, or '1.', '2.' for ordered lists. Other bullets are not allowed, even if used in the original source."
                            },
                            "content": {
                              "type": "string",
                              "description": "The text content of the list item. Empty or whitespace-only items will be automatically filtered out during list construction. (MarkdownFormattedText)"
                            }
                          },
                          "required": [
                            "indent",
                            "bullet",
                            "content"
                          ]
                        },
                        "description": "Array of list items with hierarchical structure. Items are automatically organized into a nested tree based on indentation levels. The list validates that indentation follows proper nesting rules (no level skipping, proper parent-child relationships)."
                      }
                    },
                    "required": [
                      "items"
                    ]
                  }
                },
                "required": [
                  "type",
                  "properties"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "paragraph",
                    "description": "Component type: paragraph"
                  },
                  "properties": {
                    "type": "object",
                    "description": "Properties for paragraph component",
                    "properties": {
                      "text": {
                        "type": "string",
                        "description": "The paragraph text content, which may contain multiple sentences and markdown formatting. (MarkdownFormattedText)"
                      }
                    },
                    "required": [
                      "text"
                    ]
                  }
                },
                "required": [
                  "type",
                  "properties"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "poll",
                    "description": "Component type: poll"
                  },
                  "properties": {
                    "type": "object",
                    "description": "Properties for poll component",
                    "properties": {
                      "question": {
                        "type": "string",
                        "description": "The poll question or prompt text that users will respond to. (MarkdownFormattedText)"
                      },
                      "choices": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "description": "List of answer choices or options that users can select from."
                      },
                      "allow_multiple": {
                        "type": "boolean",
                        "description": "Whether users can select multiple choices (checkboxes) or only one choice (radio buttons). Defaults to false.",
                        "default": false
                      },
                      "results": {
                        "type": "array",
                        "items": {
                          "type": [
                            "integer",
                            "number"
                          ]
                        },
                        "description": "Optional list of voting results corresponding to each choice. Can be vote counts (integers) or percentages (floats)."
                      },
                      "count_name": {
                        "type": "string",
                        "description": "Name for the unit of measurement when displaying count results (e.g., 'votes', 'responses'). Defaults to 'votes'.",
                        "default": "votes"
                      },
                      "poll_name": {
                        "type": "string",
                        "description": "Display name or title for the poll. Defaults to 'Poll'. (MarkdownFormattedText)",
                        "default": "Poll"
                      }
                    },
                    "required": [
                      "question",
                      "choices"
                    ]
                  }
                },
                "required": [
                  "type",
                  "properties"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "table",
                    "description": "Component type: table"
                  },
                  "properties": {
                    "type": "object",
                    "description": "Properties for table component",
                    "properties": {
                      "headers": {
                        "type": "array",
                        "items": {
                          "type": "string",
                          "description": "MarkdownFormattedText"
                        },
                        "description": "List of column header text values that define the table structure and column names."
                      },
                      "rows": {
                        "type": "array",
                        "items": {
                          "type": "array",
                          "items": {
                            "type": "string",
                            "description": "MarkdownFormattedText"
                          }
                        },
                        "description": "List of data rows, where each row is an array of cell values corresponding to the headers."
                      },
                      "caption": {
                        "type": "string",
                        "description": "Optional caption text displayed below the table. (MarkdownFormattedText)"
                      }
                    },
                    "required": [
                      "headers",
                      "rows"
                    ]
                  }
                },
                "required": [
                  "type",
                  "properties"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "video",
                    "description": "Component type: video"
                  },
                  "properties": {
                    "type": "object",
                    "description": "Properties for video component",
                    "properties": {
                      "url": {
                        "type": "string",
                        "description": "The URL to the video content (e.g., YouTube, Vimeo, or direct video file link)."
                      },
                      "name": {
                        "type": "string",
                        "description": "The display name or title for the video, used in the clickable link text."
                      },
                      "caption": {
                        "type": "string",
                        "description": "Optional caption text displayed below the video link. (MarkdownFormattedText)"
                      },
                      "description": {
                        "type": "string",
                        "description": "Alt text description for accessibility, used when a thumbnail is present."
                      },
                      "thumbnail_image_url": {
                        "type": "string",
                        "description": "Optional URL to a thumbnail image that makes the video clickable via the image."
                      }
                    },
                    "required": [
                      "url"
                    ]
                  }
                },
                "required": [
                  "type",
                  "properties"
                ]
              }
            ]
          },
          "description": "Array of markdown components that make up the document. Each component must specify its type and include the corresponding component-specific properties."
        }
      },
      "required": [
        "components"
      ]
    }
  },
  "required": [
    "metadata",
    "components"
  ],
  "additionalProperties": false
}